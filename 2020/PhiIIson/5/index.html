<!DOCTYPE html>
<html lang="ru">
  <head>  
    <meta charset="utf-8" />
    <!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><![endif]-->
    <title>Лабораторная работа 5</title>
    <link rel="stylesheet" href="https://www.x3dom.org/download/x3dom.css" />
    <script src="https://www.x3dom.org/download/x3dom.js"></script>

    <link rel="stylesheet" href="https://www.x3dom.org/download/dev/x3dom.css" />
    <script src="https://www.x3dom.org/download/dev/x3dom-full.js"></script>
    <link rel="stylesheet" href="../css/custom.css" />
    <script src="../js/custom.js"></script>
    <script>
      function more()
      {
      	var peepo2 = all2.getAttribute("render");
      	var peepo3 = all3.getAttribute("render");
        if (peepo2 == "off" || peepo3 == "off") 
          { 
	        all2.setAttribute("render", "true");
	        all3.setAttribute("render", "true");
	        butp.value = "LESS PEEPO";
	      }
	    else
    	  { 
	        all2.setAttribute("render", "off");
	        all3.setAttribute("render", "off");
	        butp.value = "MORE PEEPO";
          }        
      }

      function myachi()
      {
      	var shar = Time_h.getAttribute("enabled");
      	if (shar == "true") 
          { 
          	
	        Time_h.setAttribute("enabled", "false");
	        show.setAttribute("render", "off");
	        buts.value = "BEGIN SHOW";
	      }
	    else
    	  { 
            Time_h.setAttribute("enabled", "true");
	        show.setAttribute("render", "true");
	        buts.value = "STOP SHOW";
          }                
      }

      function f_audio()
      {
      	var au = audio.getAttribute("enabled");
      	if (au == "true") 
          { audio.setAttribute("enabled", "false");
	        audio2.setAttribute("enabled", "true");
	        buta.value = "NORMAL";
	      }
	    else
    	  { 
    	  	audio2.setAttribute("enabled", "false");
            audio.setAttribute("enabled", "true");
	        buta.value = "BASS BOOSTED";
          }        
      }
    </script>

  </head>
  <body>
    <h2 style="color:#F0F8FF; font-family:CENTURY GOTHIC;">Philippov Ivan group:4741</h2>
    <input id="butp" type="button" 
    style=" font-family:CENTURY GOTHIC;"
    value="MORE PEEPO" onclick="more();"/>
    <input id="buts" type="button" 
    style=" font-family:CENTURY GOTHIC;"
    value="STOP SHOW" onclick="myachi();"/>
    <input id="buta" type="button" 
    style=" font-family:CENTURY GOTHIC;"
    value="BASS BOOSTED" onclick="f_audio();"/>
    <style>
  		body { background: url(https://i.imgur.com/zz8z6OF.jpg); }
	</style>
      <X3D width='1400px' height='860px'>
        <scene> 

          <background id="back" 
          bottomUrl="https://i.imgur.com/8izW4o3.png"
          topUrl="https://i.imgur.com/xVwHKTI.png"
  		  backUrl="https://i.imgur.com/BuVXCNr.png"            
          frontUrl="https://i.imgur.com/yGA653W.png" 
          leftUrl="https://i.imgur.com/ucHG7Ls.png" 
          rightUrl="https://i.imgur.com/bohATat.png"></background>

          <viewpoint position='15 8 60' orientation='1,-1.5,0,-.2'></viewpoint>

          <sound>
			<audioClip id="audio" url='aud.mp3' loop='true' enabled='true'></audioClip>
		  </sound>

		  <sound>
			<audioClip id="audio2" url='audbb.mp3' loop='true' enabled='false'></audioClip>
		  </sound>

		  <TimeSensor DEF="Time3"  cycleInterval=".3" loop="true" enabled="true"></TimeSensor>
          <TimeSensor DEF="Time2" cycleInterval="1" loop="true" enabled="true"></TimeSensor>
          <TimeSensor DEF="Time" cycleInterval="3" loop="true" enabled="true"></TimeSensor>
          <TimeSensor DEF="Time_h" id="Time_h" cycleInterval=".3" loop="true" enabled="true"></TimeSensor>


          <PositionInterpolator DEF="PosInt_peepo" key="0 .2 .25 .3 .7 .75 .8 1"
 		  keyValue="0 0 0, 0 0 -11.5, 0 0 -12, 0 0 -11.5, 0 0 11.5, 0 0 12,
 		  0 0 11.5, 0 0 0"></PositionInterpolator>
 		  <PositionInterpolator DEF="PosInt_peepo2" key="0 .5 1"
 		  keyValue="-15 0 -12, -15 0 12, -15 0 -12"></PositionInterpolator>
 		  <PositionInterpolator DEF="PosInt_peepo3" key="0 .33 .66 1"
 		  keyValue="15 0 0, 15 0 -12, 15 0 12, 15 0 0"></PositionInterpolator>

 		  <PositionInterpolator DEF="PosInt_smball1" key="0 .166 .332 .498 .664 .83 1"
 		  keyValue="2.7 4.4 -1.3, 0 5.4 -1.3, -2.7 4.4 -1.3, -2.3 8 -2.7, 0 9 -4,
 		   2.3 8 -2.7, 2.7 4.4 -1.3"></PositionInterpolator>
 		  <PositionInterpolator DEF="PosInt_smball2" key="0 .166 .332 .498 .664 .83 1"
 		  keyValue="-2.7 4.4 -1.3, -2.3 8 -2.7, 0 9 -4, 2.3 8 -2.7, 2.7 4.4 -1.3,
 		   0 5.4 -1.3, -2.7 4.4 -1.3"></PositionInterpolator>
 		  <PositionInterpolator DEF="PosInt_smball3" key="0 .166 .332 .498 .664 .83 1"
 		  keyValue="0 9 -4, 2.3 8 -2.7, 2.7 4.4 -1.3, 0 5.4 -1.3, -2.7 4.4 -1.3,
 		   -2.3 8 -2.7, 0 9 -4"></PositionInterpolator>
 		  <PositionInterpolator DEF="PosInt_smball4" key="0 .166 .332 .498 .664 .83 1"
 		  keyValue="0 5.4 -1.3, -2.7 4.4 -1.3, -2.3 8 -2.7, 0 9 -4, 2.3 8 -2.7,
 		   2.7 4.4 -1.3, 0 5.4 -1.3"></PositionInterpolator>
 		   <PositionInterpolator DEF="PosInt_smball5" key="0 .166 .332 .498 .664 .83 1"
 		  keyValue="-2.3 8 -2.7, 0 9 -4, 2.3 8 -2.7, 2.7 4.4 -1.3, 0 5.4 -1.3,
 		   -2.7 4.4 -1.3, -2.3 8 -2.7"></PositionInterpolator>
 		   <PositionInterpolator DEF="PosInt_smball6" key="0 .166 .332 .498 .664 .83 1"
 		  keyValue="2.3 8 -2.7, 2.7 4.4 -1.3, 0 5.4 -1.3, -2.7 4.4 -1.3, 
 		  -2.3 8 -2.7, 0 9 -4, 2.3 8 -2.7"></PositionInterpolator>

 		  <OrientationInterpolator DEF="OrientInt_ball" key="0 .25 .5 .75 1"
 		  keyValue="1 .2 -.1 0, 1 .2 -.1 -3.1, 1 .2 -.1 0, 1 .2 -.1 3.1, 1 .2 -.1 0"></OrientationInterpolator>
 		  <OrientationInterpolator DEF="OrientInt_leg1" key="0 .25 .5 .75 1"
 		  keyValue="1 -.5 0 0, 1 -.5 0 1.2, 1 -.5 0 0, 1 -.5 0 1.2, 1 -.5 0 0"></OrientationInterpolator>
 		  <OrientationInterpolator DEF="OrientInt_leg2" key="0 .25 .5 .75 1"
 		  keyValue="1 -.1 0 1.2, 1 -.1 0 0, 1 -.1 0 1.2, 1 -.1 0 0, 1 -.1 0 1.2"></OrientationInterpolator>
 		  <OrientationInterpolator DEF="OrientInt_hand1" key="0 .25 .5 .75 1"
 		  keyValue="1 -.5 0 0, 1 -.5 0 .4, 1 -.5 0 0, 1 -.5 0 .4, 1 -.5 0 0"></OrientationInterpolator>
 		  <OrientationInterpolator DEF="OrientInt_hand2" key="0 .25 .5 .75 1"
 		  keyValue="1 -.1 0 .4, 1 -.1 0 0, 1 -.1 0 .4, 1 -.1 0 0, 1 -.1 0 .4"></OrientationInterpolator>

	<!--------------------------------------------peepo------------------------------------------------>
<transform DEF="peepoandball">
	<transform DEF="all">
		<transform DEF="peepo">
          <!--------------------------------------------голова------------------------------------------------>
          <transform scale='.9 .9 .8' translation='0 0 0'> 
            <shape> 
              <appearance> 
                <imagetexture  url='https://i.imgur.com/lTru2CF.png'></imagetexture> 
                <texturetransform rotation='.1'></texturetransform>
              </appearance> 
              <sphere radius='2'></sphere> 
            </shape> 
          </transform>
          <transform scale='1 .8 1' translation='0 .5 .15'> 
            <shape> 
              <appearance> 
                <imagetexture  url='https://i.imgur.com/lTru2CF.png'></imagetexture>
              </appearance> 
              <sphere radius='1.6'></sphere> 
            </shape> 
          </transform>

          <!--------------------------------------------глазницы------------------------------------------------>
          <transform scale='1 1 .8' translation='.5 1.1 .7'> 
            <shape DEF="glazn"> 
              <appearance> 
                <imagetexture  url='https://i.imgur.com/lTru2CF.png'></imagetexture>
              </appearance> 
              <sphere radius='.9'></sphere> 
            </shape> 
          </transform>

          <transform scale='1 1 .8' translation='-.5 1.1 .7'> 
            <shape USE="glazn"></shape> 
          </transform>

          <!--------------------------------------------глаза------------------------------------------------>
          <transform scale='1 .9 1' translation='-.5 1.3 1.3'> 
            <shape DEF="glaz">
              <appearance> 
                <imagetexture  url='https://i.imgur.com/SM1f9bo.png'></imagetexture>
              </appearance> 
              <sphere radius='.55'></sphere> 
            </shape> 
          </transform>

          <transform scale='1 .9 1' translation='.5 1.3 1.3'> 
            <shape USE="glaz"></shape> 
          </transform>

          <!--------------------------------------------рот------------------------------------------------>
          <transform rotation='1 0 0 2.2' scale='1.15 1 1' translation='0 1 .9'> 
            <shape DEF="guba"> 
              <appearance>
                <material diffuseColor='.4 .03 0'></material> 
              </appearance> 
              <torus innerRadius='.1' outerRadius='1'></torus> 
            </shape> 
          </transform>

          <transform rotation='1 0 0 2.2' scale='1.15 1 1' translation='0 .9 .9'> 
            <shape USE="guba"></shape> 
          </transform>

          <!--------------------------------------------нос------------------------------------------------>          
           <transform translation='0 .8 1.9'> 
            <shape> 
              <appearance> 
                <material diffuseColor='1 0 0'></material>
              </appearance> 
              <sphere radius='.3'></sphere> 
            </shape> 
          </transform>

          <!--------------------------------------------парик------------------------------------------------>
          <transform rotation='1 0 0 -1.85' scale='1 .7 .8' translation='0 1.2 -.1'> 
            <shape> 
              <appearance> 
              	<imagetexture  url='https://i.imgur.com/RAgjuVU.png'></imagetexture>
              </appearance> 
              <sphere radius='2'></sphere> 
            </shape> 
          </transform>

          <!--------------------------------------------тело------------------------------------------------>
          <transform rotation='1 0 0 -.5' scale='.9 .8 .8' translation='0 -1 .2'> 
            <shape> 
              <appearance> 
                <imagetexture  url='https://i.imgur.com/Vn7WRp0.jpg'></imagetexture>
              </appearance> 
              <sphere radius='2.2'></sphere> 
            </shape> 
          </transform>

          <!--------------------------------------------бант------------------------------------------------>
          <transform rotation='1 0 0 -.5' scale='.25 .25 .25' translation='0 -.2 1.5'> 
            <shape> 
              <appearance> 
              	<imagetexture  url='https://i.imgur.com/AVw7ykv.jpg'></imagetexture>
              </appearance> 
              <IndexedTriangleSet index="0 1 2 3 4 5" solid="false">
 				<coordinate point="-2 1 1, -2 -1 1, 1 0 1, -1 0 1, 2 1 1, 2 -1 1"></coordinate>
			  </IndexedTriangleSet>
            </shape> 
          </transform>

          <transform translation='0 -.1 1.7'> 
            <shape> 
              <appearance> 
              	<imagetexture  url='https://i.imgur.com/AVw7ykv.jpg'></imagetexture>
              </appearance>
              <sphere radius='.15'></sphere> 
            </shape> 
          </transform>

          <!--------------------------------------------руки------------------------------------------------>
          <transform DEF="hand1">
	          <transform rotation='1 1 0 -1.8' translation='-2.1 -1.1 1.22'>
		        <shape DEF="arm">
		          <appearance> 
		            <imagetexture  url='https://i.imgur.com/Vn7WRp0.jpg'></imagetexture>
		          </appearance>  
		          <cylinder height='2.5' radius='.25'></cylinder>
		        </shape>
		      </transform>
		      <transform scale='.8 .5 1' rotation='0 0 1 2.6' translation='-3 -1.6 2.4'> 
	        	<shape DEF="mitt"> 
	              <appearance> 
	                <imagetexture  url='https://i.imgur.com/lTru2CF.png'></imagetexture>
	              </appearance> 
	              <sphere radius='0.45'></sphere> 
	            </shape> 
	          </transform>
          </transform>

          <transform DEF="hand2">
		      <transform rotation='1 -1 0 -1.8' translation='2.1 -1.1 1.22'>
		      	<shape USE="arm"></shape> 
		      </transform>
		      <transform scale='.8 .5 1' rotation='0 0 1 -2.6' translation='3 -1.6 2.4'>
		      	<shape USE="mitt"></shape> 
		      </transform>
	      </transform>

          <!--------------------------------------------ноги------------------------------------------------>
          <transform DEF="leg1" center='-1 -2.2 1.4'>
          	<transform DEF="leg">
		      <transform rotation='1 0 0 -1.2' translation='-1 -2.4 1.22'>
		        <shape>
		          <appearance> 
		            <imagetexture  url='https://i.imgur.com/Vn7WRp0.jpg'></imagetexture>
		          </appearance>  
		          <cylinder height='1.6' radius='.3'></cylinder>
		        </shape>
		      </transform>

		      <transform translation='-1 -2.7 2'>
		        <shape>
		          <appearance> 
		            <imagetexture  url='https://i.imgur.com/DAyPFM7.jpg'></imagetexture>
		          </appearance>  
		          <sphere radius='.3'></sphere>
		        </shape>
		      </transform>

		      <transform rotation='1 0 0 0' translation='-1 -3.3 2'>
		        <shape>
		          <appearance> 
		            <imagetexture  url='https://i.imgur.com/Vn7WRp0.jpg'></imagetexture>
		          </appearance>  
		          <cylinder height='1.2' radius='.27'></cylinder>
		        </shape>
		      </transform>

		      <transform scale='.8 .5 1' rotation='1 0 0 0' translation='-1 -3.7 2.2'> 
            	<shape> 
	              <appearance> 
	                <imagetexture  url='https://i.imgur.com/Vn7WRp0.jpg'></imagetexture>
	              </appearance> 
	              <sphere radius='0.6'></sphere> 
	            </shape> 
	          </transform>
	      </transform>
	  </transform> 


	      <transform DEF="leg2" translation='2 0 .12' rotation='1 0 0 1.2' center='2 -2.2 1.4'>
	      	<shape USE="leg"></shape> 
	      </transform>


	    </transform> <!--all peepo-->

	<!--------------------------------------------мячи------------------------------------------------>
		<transform DEF="ball" rotation='1 0 0 .5' translation='0 -6.5 1.3'>
		  <Anchor url="https://youtu.be/e-6eWEhjMa4" parameter="target='_self'">
			<transform DEF="big_ball"> 
			  <shape> 
				<appearance> 
				  <imagetexture  url='https://i.imgur.com/8Cf1BGY.png'></imagetexture>
				</appearance>
				<sphere radius='2.7'></sphere> 
			  </shape> 
		  </transform>
		</Anchor>

	<transform DEF="show" id="show">
		<transform DEF="small_ball1" translation='2.7 5.4 -1.3' rotation='0 1 1 2'> 
			  <shape DEF="small_ball"> 
				<appearance> 
				  <imagetexture  url='https://i.imgur.com/XsgcoSy.png'></imagetexture>
				</appearance>
				<sphere radius='.5'></sphere> 
			  </shape> 
		  </transform>

		  <transform DEF="small_ball2" translation='-2.7 5.4 -1.3' rotation='0 1 -1 2'> 
			  <shape USE="small_ball"></shape> 
		  </transform>

		  <transform DEF="small_ball3" translation='0 9 -4' rotation='0 1 -1 2'> 
			  <shape USE="small_ball"></shape> 
		  </transform>

		  <transform DEF="small_ball4" translation='0 5.4 -1.3' rotation='0 1 -1 2'> 
			  <shape USE="small_ball"></shape> 
		  </transform>

		  <transform DEF="small_ball5" translation='-2.3 8 -2.7' rotation='0 1 -1 2'> 
			  <shape USE="small_ball"></shape> 
		  </transform>

		  <transform DEF="small_ball6" translation='2.3 8 -2.7' rotation='0 1 -1 2'> 
			  <shape USE="small_ball"></shape> 
		  </transform>
	</transform>

	  </transform>
	</transform>
</transform>

	 <transform DEF="all2" id='all2' render="off"> 
            <shape USE="all"></shape> 
     </transform>

      <transform DEF="all3" id="all3" render="off"> 
            <shape USE="all"></shape> 
      </transform>

	<!--------------------------------------------пол------------------------------------------------>
		 <Group DEF="pol">
          <transform translation='0 -9.2 0'> 
            <shape DEF="line"> 
              <IndexedLineSet coordIndex='0 1 2 3 0 –1'>
 				<coordinate point='20 0 20, 20 0 -20, -20 0 -20, -20 0 20'></coordinate>
 				<color color='0 0 1, 0 1 0, 0 1 1, 1 0 0, 1 0 1, 1 1 0, 1 1 1'></color>
			  </IndexedLineSet> 
            </shape> 
          </transform>

          <transform translation='0 -9.7 0'> 
            <shape USE="line"></shape> 
          </transform>

          <transform translation='0 -10.2 0'> 
            <shape USE="line"></shape>
          </transform>

          <transform translation='0 -9.2 0'> 
            <shape>
              <appearance> 
		      	<material transparency='.5'></material>
		      </appearance> 
              <IndexedFaceSet ccw="true" colorPerVertex="true" convex="true"
			  creaseAngle="0" solid="false" coordIndex="0 1 2 3">
			  	<coordinate point="20 0 20, 20 0 -20, -20 0 -20, -20 0 20"></coordinate>
			  	<color color="0 0 1, 0 1 0, 0 1 1, 1 0 0, 1 0 1, 1 1 0, 1 1 1"></color>
			  </IndexedFaceSet>
            </shape> 
          </transform>
         </Group>      

	<!-------------------------------------------------------------------------------------------->
          <navigationInfo avatarSize='0.25, 10, 1' headlight='true' speed='3.0' type="ANY"></navigationInfo>
          <collision enabled='true'></collision>

          <fog color='(0,0,0)' fogType='"EXPONENTIAL"' visibilityRange='400' ></fog>

          <PointLight color='1 0 0' location='0 8 0' intensity='.8'/>

    <!-----------------------------------------анимация-------------------------------------------->

    	  <ROUTE fromNode="Time_h" fromField="fraction_changed"
 		  toNode="OrientInt_hand1" toField="set_fraction"></ROUTE>
 		  <ROUTE fromNode="Time_h" fromField="fraction_changed"
 		  toNode="OrientInt_hand2" toField="set_fraction"></ROUTE>
 		  <ROUTE fromNode="OrientInt_hand1" fromField="value_changed"
 		  toNode="hand1" toField="set_rotation"></ROUTE>
 		  <ROUTE fromNode="OrientInt_hand2" fromField="value_changed"
 		  toNode="hand2" toField="set_rotation"></ROUTE>

 		  <ROUTE fromNode="Time2" fromField="fraction_changed"
 		  toNode="OrientInt_leg1" toField="set_fraction"></ROUTE>
 		  <ROUTE fromNode="Time2" fromField="fraction_changed"
 		  toNode="OrientInt_leg2" toField="set_fraction"></ROUTE>
 		  <ROUTE fromNode="OrientInt_leg1" fromField="value_changed"
 		  toNode="leg1" toField="set_rotation"></ROUTE>
 		  <ROUTE fromNode="OrientInt_leg2" fromField="value_changed"
 		  toNode="leg2" toField="set_rotation"></ROUTE>

 		  <ROUTE fromNode="Time" fromField="fraction_changed"
 		  toNode="PosInt_peepo" toField="set_fraction"></ROUTE>
 		  <ROUTE fromNode="PosInt_peepo" fromField="value_changed"
 		  toNode="peepoandball" toField="set_translation"></ROUTE>

 		  <ROUTE fromNode="Time" fromField="fraction_changed"
 		  toNode="PosInt_peepo2" toField="set_fraction"></ROUTE>
 		  <ROUTE fromNode="PosInt_peepo2" fromField="value_changed"
 		  toNode="all2" toField="set_translation"></ROUTE>
 		  <ROUTE fromNode="Time" fromField="fraction_changed"
 		  toNode="PosInt_peepo3" toField="set_fraction"></ROUTE>
 		  <ROUTE fromNode="PosInt_peepo3" fromField="value_changed"
 		  toNode="all3" toField="set_translation"></ROUTE>

 		  <ROUTE fromNode="Time" fromField="fraction_changed"
 		  toNode="OrientInt_ball" toField="set_fraction"></ROUTE>
 		  <ROUTE fromNode="OrientInt_ball" fromField="value_changed"
 		  toNode="big_ball" toField="set_rotation"></ROUTE>

 		  <ROUTE fromNode="Time2" fromField="fraction_changed"
 		  toNode="PosInt_smball1" toField="set_fraction"></ROUTE>
 		  <ROUTE fromNode="PosInt_smball1" fromField="value_changed"
 		  toNode="small_ball1" toField="set_translation"></ROUTE>
 		  <ROUTE fromNode="Time2" fromField="fraction_changed"
 		  toNode="PosInt_smball2" toField="set_fraction"></ROUTE>
 		  <ROUTE fromNode="PosInt_smball2" fromField="value_changed"
 		  toNode="small_ball2" toField="set_translation"></ROUTE>
 		  <ROUTE fromNode="Time2" fromField="fraction_changed"
 		  toNode="PosInt_smball3" toField="set_fraction"></ROUTE>
 		  <ROUTE fromNode="PosInt_smball3" fromField="value_changed"
 		  toNode="small_ball3" toField="set_translation"></ROUTE>
 		  <ROUTE fromNode="Time2" fromField="fraction_changed"
 		  toNode="PosInt_smball4" toField="set_fraction"></ROUTE>
 		  <ROUTE fromNode="PosInt_smball4" fromField="value_changed"
 		  toNode="small_ball4" toField="set_translation"></ROUTE>
 		  <ROUTE fromNode="Time2" fromField="fraction_changed"
 		  toNode="PosInt_smball5" toField="set_fraction"></ROUTE>
 		  <ROUTE fromNode="PosInt_smball5" fromField="value_changed"
 		  toNode="small_ball5" toField="set_translation"></ROUTE>
 		  <ROUTE fromNode="Time2" fromField="fraction_changed"
 		  toNode="PosInt_smball6" toField="set_fraction"></ROUTE>
 		  <ROUTE fromNode="PosInt_smball6" fromField="value_changed"
 		  toNode="small_ball6" toField="set_translation"></ROUTE>


        </scene> 
      </X3D> 


  </body> 
</html>